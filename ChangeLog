2001-10-18  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: gnome-print version was not checked properly.

2001-10-18  Johan Dahlin  <zilch.am@home.se>

	* src/bookshelf.c (bookshelf_add_book): Use a 'better' strcmp.

2001-10-17  Johan Dahlin  <zilch.am@home.se>

	* debian/.cvsignore: s/debian//.

	* src/bookshelf.c (bookshelf_add_directory): Fix so global books
	can be hidden.

2001-10-17  Johan Dahlin  <zilch.am@home.se>

	* debian/*: Added files for debian package.
	
	* devhelp.spec.in: Big update.

	* configure.in: Added a few *_REQUIRED and bumped another few.

	* src/devhelp-window.c (cmd_size_change_cb): Removed.
	(size_ui_listener): Added.
	(devhelp_window_new): Add 4 listeners.

	* ui/GNOME_DevHelp.ui: Updated to use radio style on font size.
	
2001-10-17  Richard Hult  <rhult@codefactory.se>

	* src/devhelp-search.c (devhelp_search_entry_key_press_cb): Better
	fix for the key navigation in the search entry.

2001-10-17  Mikael Hallendal  <micke@codefactory.se>

	* Makefile.am (EXTRA_DIST): added vim/devhelp.vim

	* configure.in: bumped version to 0.2.0.99

	* src/devhelp-controller.c:
	- fixes bug #195 in CFB.
	(devhelp_controller_open): call bookshelf_open_document.
	(cmd_back_cb): set back button unsensitive while processing.
	(cmd_forward_cb): set forward button unsensitive while processing.

	* src/book-index.c: 
	(book_index_new): unselect all, fixes bug #246 in CFB.
	
	- include gdk/gdkkeysyms.h
	- fixes bug #245 in CFB.
	(book_index_key_press_event): new function, impl.
	(book_index_get_scrolled): selection_mode = GTK_SELECTION_SINGLE.
	(book_index_class_init): override key_press_event.

2001-10-17  Abel Cheung  <maddog@linux.org.hk>

	* configure.in: Added es and zh_TW to ALL_LINGUAS.

2001-10-16  Mikael Hallendal  <micke@codefactory.se>

	* src/book-index.c:
	(book_index_add_book): gtk_clist_sort, fixes bug #203 in CFB.
	(book_index_populate_tree): Call gtk_clist_sort just to make sure.

	* ui/devhelp.glade: 
	- removed mainapp, uses BonoboWindow now. Fixes bug #236 in
	  CF-bugzilla.
	- Changed Devhelp -> DevHelp, fixes #237 in CFB.

	* src/devhelp-controller.c:
	(impl_DevHelp_Controller_openURI): copy the CORBA_char *str_uri
	before starting to use it. fixes bug #201 in CF-bugzilla.

2001-10-15  Richard Hult  <rhult@codefactory.se>

	* devhelp.spec.in: Install libs, patch from 
	mike@gtnorthern.demon.co.uk.

2001-10-15  Mikael Hallendal  <micke@codefactory.se>

	* src/devhelp-controller.c (devhelp_controller_init): use
	DATA_DIR/devhelp instead of of DATA_DIR/devhelp/spec.

	* configure.in: bumped version to 0.2

	* NEWS: updated for 0.2

2001-10-13  Richard Hult  <rhult@codefactory.se>

	* devhelp.desktop.in: s/Devhelp/DevHelp/.

	* src/html-widget.c (html_widget_open_uri): Comment out annoying
	debugging message.

	* src/devhelp-search.c (devhelp_search_entry_key_press_cb): 
	Ugly hack to stop the entry to lose focus when using the
	left/right arrows to navigate the text.

	* src/devhelp-window.c (note_change_page, note_page_mapped,
	note_page_unmapped, note_page_setup_signals,
	notebook_append_page_with_accelerator): Added helper functions to
	add accelerators to the notebook pages.
	(devhelp_window_populate): Use them here.

2001-10-11  Mikael Hallendal  <micke@codefactory.se>

	* src/Makefile.am (EXTRA_DIST): added GNOME_DevHelp.oaf.in.in

	* ui/Makefile.am (EXTRA_DIST): added ui_DATA

2001-10-10  Mikael Hallendal  <micke@codefactory.se>

	* src/devhelp-search.c (devhelp_search_complete_idle): 
	- call bookshelf_open_document before signaling, fixes
	  link-clicking problem.

2001-09-04  Mikael Hallendal  <micke@codefactory.se>

	* src/devhelp-window.c (devhelp_window_new): set wmclass.

2001-09-02  Zbigniew Chyla  <cyba@gnome.pl>

	* configure.in (ALL_LINGUAS): Added pl.

2001-08-31  Mikael Hallendal  <micke@codefactory.se>

	* src/devhelp-window.c:
	(devhelp_window_populate): added frames around the stuff in the
	paned.

2001-08-26  Yanko Kaneti  <yaneti@declera.com>

	* Makefile.am: fix schemas_DATA when --disable-install-schemas 
	was not used.

2001-08-26  Mikael Hallendal  <micke@codefactory.se>

	* ui/GNOME_DevHelp_Controller.ui: 
	- added tooltip for CmdBookManager.

	* ui/GNOME_DevHelp.ui:
	- added tooltips
	- removed moved command.
	- use BonoboUI statusbar.

	* src/devhelp-window.c:
	- RHult informed me that I should use the statusbar API from
	  BonoboUI instead. Here we go...
	(devhelp_window_on_url_cb): updated to use BonoboUI statusbar
	  instead.
	(devhelp_window_populate): no need for using GtkStatusbar. 

	* src/devhelp-window.c:
	- Fixes bug #202.
	(devhelp_window_link_clicked_cb): changed argument order.
	(devhelp_window_on_url_cb): added/impl. Sets the statusbar when
	  mouse over a link.
	(devhelp_window_populate): 
	- Moved a couple of containers from priv-struct to local. 
	- Added statusbar
	- Connect to "on_url" from html_widget.

	* ui/GNOME_DevHelp_Controller.ui: added tip for forward/back.

	* src/devhelp-controller.c:
	(cmd_forward_cb): check if forward list exists.
	(cmd_back_cb): check if prev list exists.

	* ui/GNOME_DevHelp.ui: added submenu for font size.

	* src/book-index.c:
	(book_index_get_scrolled): don't want to emit signal when setting
	  selection mode. fixes bug #200.

	* ui/GNOME_DevHelp.ui: removed Edit-menu

	* src/devhelp-controller.c:
	(devhelp_controller_open): call devhelp_controller_emit_uri from
	  here. 
	(cmd_back_cb): don't use no GnomeVFSURI. Don't emit signal, done
	from devhelp_controller_open.
	(cmd_forward_cb): dito.

	* configure.in: bumped version to 0.1.99

	* src/GNOME_DevHelp.oaf.in.in: 
	- tagged names for translation.
	- removed moniker attribute.

	* src/devhelp-controller.c: removed debug printouts and an
	  outcommented line.

2001-08-26  Yanko Kaneti  <yaneti@declera.com>

	* configure.in:
	* Makefile.am: add --disable-install-schemas to the available 
	configure flags. When used skips all install gconf schemas steps.

2001-08-26  Mikael Hallendal  <micke@codefactory.se>

	* ui/GNOME_DevHelp_Controller.ui: 
	- added CmdBack and CmdForward. Added toolbar items.

	* src/history.[ch]: 
	- Again changed. This time to use strings instead of
	  Document+anchor. First it used URI's. Now it is very general.
	- Removed HistoryData struct.
	(history_data_new): removed.
	(history_goto): changed inargs.
	(history_go_forward): changed in/returns
	(history_go_back): dito.
	(history_get_current): dito.

	* src/devhelp-controller.c:
	- Added history support.
	(devhelp_controller_open): added/impl. broke out code from
	  impl_DevHelp_Controller_openURI. This is now also used in
	  callbacks from cmdForward and cmdBack. 
	(devhelp_controller_emit_uri): added/impl. broke out code from
	  devhelp_controller_uri_cb. This is now also used in callbacks
	  from cmdForward and cmdBack.
	(cmd_back_cb): added/impl. Handles when user presses toolbar
	  button Back. 
	(cmd_forward_cb): added/impl. Handles when user presses toolbar
	  button forward.
	(devhelp_controller_init): connect to history signals.
	(devhelp_controller_forward_exists_changed_cb):
	  added/impl. changes sensitivity of forward button whether there
	  are any entries in the forward list or not. Callback from
	  History signal 'forward_exists_changed'.
	(devhelp_controller_back_exists_changed_cb): added/impl. changes
	  sensitivity of back button in toolbar depending on whether there
	  are any entries in the back list. Callback from History signal
	  'back_exists_changed'  
	(devhelp_controller_uri_cb): call history_goto and
	  devhelp_controller_emit_uri.
	(impl_DevHelp_Controller_openURI): call history_goto and
	  devhelp_controller_open. 

	* src/bookshelf.[ch] (bookshelf_find_node): take document as a
	  const. 

	* src/GNOME_DevHelp.oaf.in: removed from CVS. generated from
	  GNOME_DevHelp.oaf.in.in

2001-08-25  Mikael Hallendal  <micke@codefactory.se>

	* ui/GNOME_DevHelp_Controller.ui: moved BookManager to Settings
	  menu. Will discuss this with campd later.

2001-08-25  Yanko Kaneti  <yaneti@declera.com>

	* devhelp.spec.in:
	* Makefile.am
	* configure.in: rely on GConf (1.0.4) to get the default schema source

2001-08-25  Richard Hult  <rhult@codefactory.se>

	* src/Makefile.am: Generate the oaf.in from oaf.in.in and add the
	oaf and oaf.in to CLEANFILES.

	* src/GNOME_DevHelp.oaf.in.in: Move from oaf.in to oaf.in.in and
	don't hard code the library path for the shlib component. Also
	remove Moniker from the list of supported interfaces since we
	don't have a moniker.  

2001-08-25  Mikael Hallendal  <micke@codefactory.se>

	* ui/Makefile.am (ui_DATA): added with:
	- GNOME_DevHelp.ui (the DevHelp client's ui)
	- GNOME_DevHelp_Controller.ui (UI that comes from the Controller).

	* src/preferences.c: 
	- Use GtkArgs instead of get/set-functions.
	- Added signals for when arguments changes.
	- Removed all autocompletion-prefs since they are not used any
	  longer. Always autocompletion and it's done in an idle so
	  therefor autocomp.-speed is removed aswell.
	- Made into a object that inherits GtkObject.
	- Removed dependency on ui.c
	(preferences_get_type): added/impl.
	(preferences_init): added/impl.
	(preferences_class_init): added/impl.
	(preferences_set_*): removed
	(preferences_get_*): removed
	(preferences_get_arg): added/impl.
	(preferences_set_arg): added/impl.
	(gconf_*_changed_cb): emit signal instead of calling 
	 functions all over the place.

	* src/preferences-dialog.c: 
	- removed unused stuff from PreferenceDialog-struct. 
	- removed all GConf-stuff. Listen to signals from Prefernces
  	  instead.
	- Removed all autocompletion-stuff.
	- Use Preferences GtkArg's instead of get/set-functions
	(pd_zoom_level_changed_cb): Preferences-cb instead of gconf-cb.
	(pd_sidebar_visible_changed_cb): dito.
	(gconf_autocompletion_changed_cb): removed	
	(prefs_destroy_cb): don't remove listeners from gconf.
	(preferences_dialog_new): renamed from
	  menu_preferences_activate_cb and cleaned up.

	* src/main.c: 
	(corba_search_cb): removed.
	(corba_search_in_new_window_cb): removed.
	(devhelp_factory): don't listen to any help_browser signals.
	(idle_activate_and_search_quit): don't return if data != NULL.
	(main): call, glade_gnome_init, don't call g_thread_init.
	
	* src/install.c: 
	- Don't use DevHelp struct, now removed.
	(install_unpack_book): takes Bookshelf instead of DevHelp.
	(install_insert_book): Dito.
	(install_book): Dito.

	* src/html-widget.h: added html_widget_print.

	* src/html-widget.c: 
	- removed unncessary comments.
	- moved print (HtmlWidget *widget) here and renamed it
	  html_widget_print. This comes from the now removed file print.c

	* src/help-browser.c: 
	- removed signals 'search' and 'search_in_new_window'.
	- temporarly disable the windows-list. Currently only using one
	  window.
	(impl_HelpBrowser_search): call devhelp_window_search instead of
	  emitting a signal.
	(impl_HelpBrowser_searchInNewWindow): Do not emit, should create a
	  new window and call devhelp_window_search on it. Not implemented
	  yet though.
	(help_browser_class_init): removed the signals mentioned above.

	* src/devhelp-window.c: 
	- Main window in the DevHelp app. This uses the so-lib exactly as
	  any embedding app would. Therefor it should be a good place to
	  look if you want to embed DevHelp inside your application using
	  Bonobo. Look in devhelp_window_populate how to activate and use
	  DevHelp. 
	- A BonoboWindow using BonoboUI for menus and toolbar.

	* src/devhelp-search.[ch]:
	(devhelp_search_get_entry_widget): added/impl. returns the search
	  entry.
	(devhelp_search_set_search_string): added/impl. set's the search
	  string in the entry.
	(devhelp_search_get_result_widget): added/impl. returns the search
	result list in a scrolled window.

	* src/bookshelf.[ch]: 
	- Added signals 'book_added' and 'book_removed'.
	(bookshelf_add_book): emit 'book_added'
	(bookshelf_remove_book): emit 'book_removed'

	* src/books-dialog.[ch]:
	- Removed everything that had todo with gconf. The gconf-stuff is
	  now isolated in preferences.c. 
	- Removed DevHelp references (that struct is removed). Instead use
	  Bookshelf. 
	- code cleanups.
	(gconf_sidebar_visible_changed_cb): removed
	(books_dialog_new): 
	  - renamed from menu_options_books_activate_cb
	    since it's a better name and the dialog knows nothing about
	    any menu. 
	  - Removed gconf-stuff. 

	* src/book.c:
	(book_node_get_uri): handle the extra 'anchor'-argument. 
	(book_url_get_book_relative): removed a debug printout.

	* src/book-node.h: book_node_get_uri takes an extra optional (set
	  to NULL if not used) argument. This is a work around the problem
	  that there are book_node's without the correct anchor set.

	* src/book-index.[ch]: moved around functions to come in the same
	  order as the declarations. Makes it easier to find the function.
	(book_index_select_row): added argument to book_node_get_uri,
	  somewhat work around.
	(book_index_get_scrolled): added, returns the BookIndex widget in
	  a scrolled window.

	* src/Makefile.am:
	(libdevhelp_la_SOURCES): 
	- Build a so-lib which activates through OAF.
	- Moved files into the so-lib instead of everything into the same
	  binary. This includes all internal devhelp-stuff will be used by
	  other clients then the DevHelp gui.
	(devhelp_SOURCES): Removed:
	- main.h
	- ui.[ch]
	- print.[ch]
	
	* src/GNOME_DevHelp.oaf.in: 
	- Added GNOME_DevHelp_Controller factory.
	- Added GNOME_DevHelp_Controller.

	* idl/GNOME_DevHelp.idl:
	- Added interface GNOME_DevHelp_Controller.
	- This interface takes care of communication between "client" and
	  the so-lib "server".

	* devhelp.schemas: removed autocompletion schema.

	* ui/GNOME_DevHelp.ui: Added.

	* ui/GNOME_DevHelp_Controller.ui: Added.

	* src/ui.[ch]: Removed.

	* src/print.[ch]: Removed.

	* src/main.h: Removed.
	
	* ui/devhelp.glade: updated.

	* src/devhelp-controller.[ch]: Added.

2001-08-22  Mikael Hallendal  <micke@codefactory.se>

	* misc/devhelp.vim: remove -f here to.

2001-08-22  Richard Hult  <rhult@codefactory.se>

	* misc/devhelp.el (devhelp-word-at-point): Don't use -f, it's
	removed.

2001-08-14  Fatih Demir <kabalak@gtranslator.org>

	* .cvsignore & xml-i18n*: The xml-i18n-tools are to be ignored,
		they're autogenerated.

2001-08-13  Mikael Hallendal  <micke@codefactory.se>

	* src/main.c: 
	- added DEVHELP_FACTORY_OAFIID.
	- renamed factory_fn to devhelp_factory.
        - removed following two functions, it's done in the main-function
	  now. It will always be started by a factory now.
	(devhelp_factory_main): removed
	(devhelp_normal_main): removed
	(main): removed the use-factory argument, always use factory now.

	* src/devhelp-window.[ch]: 
	- Added
	- This is a BonoboWindow which will be used to put the different
	  controls in.

	* src/devhelp-search.c (devhelp_search_init): fixed c&p error.

	* src/Makefile.am (devhelp_SOURCES): added devhelp-window.[ch]

	* src/main.c: Devhelp -> DevHelp.

	* src/help-browser.[ch]: Devhelp -> DevHelp.

	* src/Makefile.am: Devhelp -> DevHelp

	* src/GNOME_DevHelp.oaf.in: Devhelp -> DevHelp.

	* src/.cvsignore: Devhelp -> DevHelp.

	* idl/GNOME_DevHelp.idl: renamed from GNOME_DevHelp.idl.

	* src/ui.c (main_window_key_press_event_cb): grab focus, had
	  commented this out during testing before.

	* ui/devhelp.glade: removed the search entry. Now created in
	  devhelp-serach and referenced by devhelp_search_get_entry. 

	* src/main.h: added DevHelpSearch and made references to clist and
	  entry pointers to GtkWidget * instead.

	* src/main.c (corba_search_cb): cast devhelp->entry (now a
	  GtkWidget * instead of a GtkEntry *.
	(devhelp_normal_main): dito.

	* src/bookshelf.c: moved around some functions to reflect the
	  order they are declared, makes it easier to find in the file.
	(bookshelf_get_function_database): added, returns a reference to
	  the function database.

	* src/book-index.[ch]: some include-fixes.

	* src/Makefile.am (devhelp_SOURCES): added devhelp-search.[ch].

	* src/devhelp-search.[ch]: added/impl. 
	- This is a GtkObject which initialize and hides all the work
	  between the GtkCList and the GtkEntry. 
	- A reference to the entry is returned from
	  devhelp_search_get_entry. and to the clist with 
	  devhelp_search_get_result_list.
	- A signal uri_selected is emmited when a hit is clicked in the
	  CList.

	* src/ui.c:
	- much code moved into devhelp-search.
	(gtk_clist_if_exact_go_there): removed.
	(gtk_clist_set_contents): removed
	(clist_select_row_cb): removed
	(search_entry_changed_cb): removed.
	(complete_idle): removed.
	(search_entry_insert_text_cb): removed.
	(search_entry_key_press_cb): removed.
	(search_entry_activate_cb): removed.
	(get_search_string_cb): removed.
	(exact_hit_found_cb): removed.
	(devhelp_search): removed.
	(hits_found_cb): removed.
	(search_button_clicked_cb): removed.

2001-08-12  Mikael Hallendal  <micke@codefactory.se>

	* src/book-index.c (book_index_class_init): override
	gtkobject->destroy. 

	* src/book-index.h: fixed the header.

	* src/book-index.c (book_index_destroy): added/impl.

	* src/ui.c:
	(gtk_ctree_goto): removed.
	(ctree_select_row_cb): removed.
	(book_index_uri_selected_cb): added, called when user clicks in
	BookIndex. 
	(devhelp_create_pixmaps): removed.
	- removed DevhelpPixmap-struct.
	(devhelp_insert_book_node): removed.
	(devhelp_create_book_tree): removed.
	- Use BookIndex instead of GtkCTree directly., much of the
	functionality has been moved into BookIndex internals. Much
	cleanups in ui.c
	(devhelp_create_ui): moved around to initialize Bookshelf before
	the BookIndex.
	- removed DevHelpPixmaps.
	
	* src/main.h: changed the DevHelp->ctree for a DevHelp->book_index.

	* src/install.c (install_insert_book): call book_index_add_book
	instead of doing all the dirty work yourself.

	* src/bookshelf.c:
	(bookshelf_find_document): also handles absolute url's.

	* src/book.c:
	(book_url_get_book_relative): now also handles absolute url's.

	* src/book-index.[ch]: 
	- Added
	- This is a subclass of GtkCTree which is used to display the
	  book-index. It will later be available as a BonoboControl which
	  is used with BonoboPropertyBag.

	* src/Makefile.am (devhelp_SOURCES): added book-index.[ch]

	* devhelp.spec.in: added sysconfdir by request of YupaSD.

2001-08-09  Richard Hult  <rhult@codefactory.se>

	* src/ui.c (main_window_key_press_event_cb): Make control-l focus
	the search entry and select the contents of the entry.

2001-08-07  Mikael Hallendal  <micke@codefactory.se>

	* src/bookshelf.[ch]: added bookshelf_remove book.

2001-08-05  Johan Dahlin  <zilch.am@home.se>

	* src/ui.c (devhelp_create_ui): gtk_clist_set_column_with &
	gtk_clist_set_selection_mode added, this fixes click on link and
	ctree will go empty bug.

2001-08-05  Mikael Hallendal  <micke@codefactory.se>

	* src/ui.c: just some style cleanups.

	* src/bookmark-manager.c: fixed to work fine with Document/anchor
	way of doing it.

	* src/book-node.h: include libgnomevfs/gnome-vfs.h

2001-08-04  Johan Dahlin  <zilch.am@home.se>

	* misc/devhelp.vim: Added. Thanks goes to Gert.

2001-08-02  Johan Dahlin  <zilch.am@home.se>

	* configure.in (DEVHELP_VERSION): Bumped version to 0.1.1

2001-08-02  Mikael Hallendal  <micke@codefactory.se>

	* src/bookshelf.c (bookshelf_write_xml): the path should be freed.

2001-08-01  Johan Dahlin  <zilch.am@home.se>

	* ui/devhelp.glade: Remove clist and ctree, but keep scrolled windows.

	* src/ui.c (devhelp_insert_book_node): Added visible check.
	(devhelp_create_ui): Create ctree and clist here instead of in glade.

	* src/bookshelf.h: Fix bookshelf_write_xml.

	* src/bookshelf.c: Added visible here too.
	(bookshelf_write_xml): Remove root from arguments, and add visible check.
	(bookshelf_read_xml): Dito.

	* src/books-dialog.c (books_button_show_clicked_cb): Updated
	(books_button_hide_clicked_cb): Dito.
	(update_clist): Dito.

	* src/book.h: added book_set/is_visible here too.

	* src/book.c: Added visible.
	(book_set_visible): New function.
	(book_is_visible): New function.

	* src/bookshelf.c (bookshelf_write_xml): Use book_get_path to get
	the path.

2001-08-01  Mikael Hallendal  <micke@codefactory.se>

	* src/books-dialog.c 
	(books_button_edit_clicked_cb): free the path.
	(info_button_ok_clicked_cb): free the path.

	* src/book.c (book_get_path): don't return const gchar since it
	has to be freed.

2001-08-01  Johan Dahlin  <zilch.am@home.se>

	* src/ui.c (menu_help_about_activate_cb): Make the copyright
	string translatable.

	* src/install.c (install_insert_book): make it look prettier.
	(install_book): Show mime_type with error messages

	* src/book.c (book_get_path): Use gnome_vfs_uri_to_string instead
	of gnome_vfs_uri_get_path.

2001-08-01  Mikael Hallendal  <micke@codefactory.se>

	* src/install.c (install_insert_book): don't freeze/thaw function
	database since it's not changed between the freeze and the thaw.

	* src/bookshelf.c:
	- cleaned up some code in bookshelf_write_xml and
   	  bookshelf_read_xml.
	(bookshelf_write_xml): fix leak.

2001-07-31  Johan Dahlin  <zilch.am@home.se>

	* src/book.c: 
	* src/bookshelf.c: 
	* src/main.c: #include s/libxml/gnome-xml/ beacause it seems to
	work better for a lot of peoples, Thanks goes to Alfons Hoogervorst.

	* src/books-dialog.c (books_button_edit_clicked_cb): If no books
	is installed and Edit book is clicked, return;
	(info_button_ok_clicked_cb): check if book is null. Fixes segfault.

	* configure.in: s/AM_GNU_GETTEXT/AM_GNOME_GETTEXT/. Thanks goes to Yanko Kaneti.

	0.1.0 Released.

	Imported to GNOME CVS.

2001-07-31  Richard Hult  <rhult@codefactory.se>

	* src/main.c (idle_activate_and_search): Eek, data is allowed to
	be NULL so don't g_return_fail.
	(activate_and_search): Only search if search string =! NULL.

	* src/html-widget.c: Include config.h to get i18n working.

	* src/main.c: Clean up a bit and init threads for gnome-vfs.

	* src/main.h: Add search_button to devhelp struct.

	Commented-out code that will be used when the non-autocompletion
	case works:
	* src/ui.c (autocompletion_toggled_cb): Make the search button
	sensitivite if autocompetion is not on.
	(devhelp_create_ui): Set initial sensitivity correctly as well.

2001-07-31  Johan Dahlin  <zilch.am@home.se>

	* configure.in: GTKHTML 0.9.1 & GNOME_VFS 1.0.0 is now reqired.

	* src/install.c (install_book): Remove message.

	* src/bookshelf.c (bookshelf_add_book): Check if the book is
	installed correctly.

	* src/book.c (book_parse): s/name/priv->name/

	* ui/devhelp.png: New version, Thanks Marcus Leyman.
	
2001-07-30  Mikael Hallendal  <micke@codefactory.se>

	* src/book.c (book_node_find): take document as const.

	* src/install.c: include gnome-vfs-mime.h

	* src/bookshelf.c (bookshelf_add_book): fixed error that caused
	non-compile issue.

	* src/book.c: moved book_set_base_url to reside with the other
	non-static functions.
	(book_set_base_url): don't destroy the url argument.
	(book_parse): no need to check for base_url since it's no longer
	used. free the xml_str only if it's not NULL.
	(book_url_get_book_relative): moved to be with the other static
	functions. 

2001-07-30  Johan Dahlin  <zilch.am@home.se>

	* src/book.c (book_parse): Removed gconf code.

	* src/ui.c (addbook_dialog_clicked_cb): New function, stolen
	from books-dialog.c (change one or two lines).
	(addbook_key_event): Dito.
	(menu_file_addbook_activate_cb): Dito.
	(devhelp_create_ui): Load menu_file_addbook item.

	* src/install.c (gnome_message): New function.
	(install_create_directory): static for now.
	(install_create_directories): Remove gconf code.
	(install_is_book_installed): Remove.
	(install_register_book): Remove.	
	(install_insert_book): Add bookshelf_write_xml, since it makes
	most sense here.

	* src/html-widget.c (html_widget_new): Make intro html page translatable.
	(html_widget_async_open_cb): Make error message translatable.

	* src/bookshelf.h: Add prototypes for bookshelf_read_xml,
	bookshelf_write_xml.

	* src/bookshelf.c: include libgnome/gnome-defs.h & gnome-i18n.h
	XMLBook, new struct.
	(bookshelf_write_xml): New function.
	(bookshelf_read_xml): New function.
	(bookshelf_add_book): Check to see if the book is already installed.

	* src/books-dialog.c (books_button_hide_clicked_cb): remove a g_message.
	(update_clist): Remove gconf code and add xml code.

	* src/book.h: Added prototype for book_set_base_url.

	* src/book.c (book_set_base_url): New function.
	(book_parse): Use book_set_base_url here.
	(book_get_path): Use gnome_vfs_uri_get_path here.

2001-07-28  Johan Dahlin  <zilch.am@home.se>

	* src/install.c (install_book): Can now install .spec files correctly.

	* src/bookshelf.[ch] (bookshelf_write_xml): Added (unused for now).

2001-07-24  Johan Dahlin  <zilch.am@home.se>

	* src/preferences.c (preferences_new): Don't watch /apps/devhelp/books.

	* src/install.c (install_is_book_installed): 
	(install_register_book): Use book_get_name instead of book_get_full_name.
	(install_register_book): Update Path.

	* src/books-dialog.c (update_clist): Dito.

	* src/book.c (book_parse): Update path.

2001-07-23  Johan Dahlin  <zilch.am@home.se>

	* ui/devhelp.glade: A few changes here to, can't remember exactly
	what i changed ;)
	
	* src/html-widget.c (READ_BUFFER_SIZE): Increase buffer size to 8192.

	* src/main.c (main): Create directories here.

	* src/books-dialog.[ch]: Lots and lots of changes in here.

	* src/install.[ch]: Lots and lots of changes in here.	

	* src/book.c (book_get_name_full): New function.
	(book_get_path): New function.
	
	* src/book.h: Dito.

	* src/bookshelf.h: Make bookshelf_add_book and
	bookshelf_add_directory public.

	* src/bookshelf.c: Renamed bookshelf_fill_with_books to 
	bookshelf_add_directory.
	BookshelfPriv: Removed books_uri.
	(bookshelf_add_book): New function.
	
	* src/ui.c (devhelp_create_pixmaps): 
	(devhelp_insert_book_node): 
	(devhelp_create_book_tree): Make functions non-static.
	(devhelp_create_ui): Change bookshelf init.

	* src/ui.h: Moved here from ui.c
	Renamed a few functions, added a few functions.

2001-07-21  Johan Dahlin  <zilch.am@home.se>

	* Makefile.am: Add gconf-schema support

	* configure.in: Rewrite gconf support totaly (stole it from eog)

	* src/function-database.c (function_database_thaw): Fix a warning
	if no book are found.

2001-07-20  Mikael Hallendal  <micke@codefactory.se>

	* src/book.c: removed debug printouts

	* src/ui.c: removed debug printouts

	* books/libc/libc.xml: updated, set link correctly.

	* src/*: New book/bookshelf-structure. Too much to list.

2001-07-19  Richard Hult  <rhult@codefactory.se>

	* src/ui.c: Remove book installation stuff from here.

	* src/books-dialog.[ch]: New files to handle book management.
	
	* src/books-dialog.c: Move install book stuff from ui.c to here.

	* configure.in: Revert weird name change I did.

	* autogen.sh: Ditto. 

	* src/ui.c (menu_file_addbook_cb): Set wmclass/name on dialog.
	(addbook_dialog_clicked_cb): If a directory is selected when ok is
	pressed, go into that directory instead of trying to install it as
	a book.
	(addbook_key_event): Close the dialog on Escape.

	* src/html-widget.c (html_widget_new): Add a little note about
	tree navigation.

	* src/main.c (main): Comment out the gnome_shutdown call.

	* src/ui.c (menu_help_about_activate_cb): add (C) to copyright.

	* autogen.sh: Change name to DevHelp.

	* configure.in: Change name to DevHelp.

2001-07-19  Johan Dahlin  <zilch.am@home.se>

	* src/install.c (install_book): Remove #ifdef 0

	* ui/devhelp.glade: Add File->Add book.

	* src/ui.c (menu_file_addbook_cb): New callback.
	(addbook_dialog_clicked_cb): Dito.
	(devhelp_create_ui): Add here too.

	* src/preferences.c (preferences_new): Create '/app/devhelp/books'.

	* src/install.h: 
	* src/install.c: New files

	* src/Makefile.am (devhelp_SOURCES): Add install.[ch]

2001-07-19  Richard Hult  <rhult@codefactory.se>

	* src/ui.c (devhelp_create_ui): Rearranged a bit in the menu structure.

	* src/preferences-dialog.c: Hook up autocompetion speed settings.

	* src/preferences.c: Ditto.

	* src/ui.c: Hook up zoom level. Change when gconf tells us to, set
	the right initial value.

	* src/preferences-dialog.c: Ditto with show/hide sidebar and zoom level.

	* src/ui.c: Move things from main.h to here, as they have nothing
	to do with anything outside ui.c

	* src/html-widget.c (html_widget_new): Load an initial page into
	the html widget.

	* src/ui.c (devhelp_ui_show_sidebar): The html widget is in a
	frame now.
	(devhelp_create_ui): Put the html widget in a frame with "in" shadow.

2001-07-19  Richard Hult  <rhult@codefactory.se>

	* src/ui.c: Make functions public so that the preference code can
	set stuff.
	(devhelp_insert_book_node): Remove unneccessary g_strdup/g_free
	pair that gets called a lot.

	* src/main.h: Make zoom levels an enum.

	* src/ui.c (menu_help_about_activate_cb): Fix typo.

2001-07-19  Johan Dahlin  <zilch.am@home.se>

	* src/html-widget.c: s/gpointer user_data/HtmlReadData *read_data/
	+ a little bit more

	* src/main.c (main): Reorganize a bit a fix --help bug.

	* src/ui.c: s/gpointer user_data/DevHelp *devhelp/ in a few
	places.

	* src/book.c (book_parse): Removed a g_print

2001-07-18  Richard Hult  <rhult@codefactory.se>

	* src/preferences-dialog.c (menu_preferences_activate_cb): Load
	and ditch the glade tree here.

	* src/ui.c (devhelp_create_ui): Don't keep the glade tree around.

	* src/main.h: Remove the glade widget tree from here.

	* src/preferences.c (preferences_new): Remove C++ comment.

	* src/preferences-dialog.h (__PREFERENCES_DIALOG_H__): Don't
	define this to 1, just define it.

	* src/main.c (main): Init gconf before vfs.

2001-07-18  Johan Dahlin  <zilch.am@home.se>

	* src/Makefile.am (devhelp_SOURCES): Added preferences-dialog.[ch]

	* src/preferences-dialog.h: New file

	* src/preferences-dialog.c: New file

	* src/ui.c (devhelp_create_ui): Dito

	* src/main.h (Devhelp struct): Added wtree.

2001-07-18  Richard Hult  <rhult@codefactory.se>

	* src/main.c (main): Shut down gnomevfs when we're done.

2001-07-18  Johan Dahlin  <zilch.am@home.se>

	* src/ui.c (menu_preferences_activate_cb): New function ..
	(devhelp_create_ui): .. and new here too.

	* ui/devhelp.glade: Change name for prefs menu entry to menu_preferences.

	* src/ui.c (devhelp_create_pixmaps): Load images from 
	DATA_DIR"/images/devhelp".

	* ui/Makefile.am: Remove devhelp.png from ui_DATA since it's only
	used as icon and not in the program itself.
	Change uidir to $(datadir)/images/devhelp.
	+ a few more changes :)

2001-07-17  Mikael Hallendal  <micke@codefactory.se>

	* src/ui.c (gtk_ctree_goto): updated.

	* books/GGAD/GGAD.xml: updated book-link.

	* src/html-widget.c: use async read.
	(html_widget_open_uri): changed name from load_uri. 
	(html_widget_async_close_cb): added/impl.
	(html_widget_async_read_cb): added/impl.
	(html_widget_async_open_cb): added/impl.
	(html_widget_load_uri): changed from write_uri.

	* src/book.c (book_node_compare_func): made extern to be used from
	ui.c

	* src/ui.c (html_link_clicked_cb): call gtk_ctree_goto to show the
	correct row.
	(gtk_ctree_goto): fixed, now works correctly when having to expand
	more than one depth.
	(tree_compare_func): removed. use book_node_compare_func instead.

	* src/html-widget.c 
	(html_widget_url_requested): use base_uri instead of baseurl.
	- fixes url_request-errors.

	* src/book.c:
	(book_contains): added/impl.

	* src/book.c (book_node_new): append instead, not to many nodes,
	if we need speed we can fix this.

	* src/html-widget.c 
	(html_widget_url_requested): changed name from ..._cb. Make this
	override url_requested from gtkhtml instead of connecting to
	signal.
	(html_widget_parse_and_split_url): removed.
	- removed some debug printouts.

2001-07-17  Johan Dahlin  <zilch.am@home.se>

	* src/ui.c (devhelp_create_pixmaps): Added gdk-pixbuf support
	again.

2001-07-17  Mikael Hallendal  <micke@codefactory.se>

	* src/util.c (util_uri_get_anchor): added/impl.

	* src/ui.c (devhelp_create_pixmaps): added/impl.
	(devhelp_insert_book_node): added/impl.
	(devhelp_create_book_tree): added/impl.
	- various fixes for using bookshelf/book.
	(bookmark_add_cb): commented out some stuff, doesn't work with
	Bookshelf/Book. 

	* src/main.c: removed all parsing stuff and such, now in
	bookshelf/book. 

	* src/html-widget.c 
	(html_widget_load_uri): changed name from ..._load_url. takes a
	uri now.
	(html_widget_write_uri): same.

	* src/function-database.c: changed for using GnomeVFSURI instead
	of urls
	- fixed the searchstuff.

	* src/history.c: same.

2001-07-17  Johan Dahlin  <zilch.am@home.se>

	* ui/devhelp.glade: Added preferences dialog.

2001-07-17  Mikael Hallendal  <micke@codefactory.se>

	* books/gnomeui/gnomeui.xml: fixed default_url.

2001-07-17  Johan Dahlin  <zilch.am@home.se>

	* ui/devhelp.glade: Use GTK_SELECTION_BROWSE instead of
	GTK_SELECTION_SINGLE (both CTree and CList)

	* src/ui.c (main_window_key_press_event_cb): New function. Use
	Ctrl-Arrows to navigate through the Index and Search list, even if
	they aren't focused.

2001-07-16  Mikael Hallendal  <micke@codefactory.se>

	* xml-i18n-merge.in: removed
	
	* src/book.c: updated

	* src/bookshelf.[ch]: updated

	* src/util.[ch]: added.

2001-07-16  Johan Dahlin  <zilch.am@home.se>

	* src/ui.c (devhelp_create_ui): clist_freeze/thaw not needed since
	the windows is now hidden.
	Rename nav_buttons to toolbar_buttons.

	* src/html-widget.c (html_widget_write_url): We don't need to
	reset read_bytes for every read.

	* ui/devhelp.glade: Allow shrink and removed an unused placeholder.

	* devhelp.spec.in (Requires): Added more dependencies.

2001-07-15  Johan Dahlin  <zilch.am@home.se>

	* ui/devhelp.glade: s/_Index/_Search/

	* src/main.c (main): Cleanup.
	(devhelp_normal_main): New function
	(devhelp_factory_main): Dito.
	(parse_books): Be a little bit more verbose.

2001-07-13  Johan Dahlin  <zilch.am@home.se>

	* src/main.c: 
	* src/preferences.c: 
	* src/preferences.h: 
	* src/ui.c: 
	* src/ui.h: s/DevhelpPriv/DevHelp/.

2001-07-13  Richard Hult  <rhult@codefactory.se>

	Initial cut at preferences.
	* src/ui.c: Use preferences.

	* src/preference.[ch: Preferences code.

2001-07-13  Johan Dahlin  <zilch.am@home.se>

	* src/html-widget.c (html_widget_load_url): Small (hackish) fixage.

2001-07-13  Richard Hult  <rhult@codefactory.se>

	* src/function-database.c: s/freezed/frozen/.

	* src/function-database.c (function_compare): Use a correct
	compare function for sorting the list (take two GSList *  and
	return the right values for less than/equal to/greater than).

	* src/html-widget.c (html_widget_load_url): Don't try to access
	freed memory (solve by duplicating it).

2001-07-13  Johan Dahlin  <zilch.am@home.se>

	* src/main.c (my_gtk_ctree_insert_node): Use
	gdk_pixbuf_new_from_file.

2001-07-12  Johan Dahlin  <zilch.am@home.se>

	* src/main.h (struct): Remove html.

	* src/html-widget.c: Include gnome-vfs-types.h & gnome-vfs-uri.h
	instead of gnome-vfs.h

	* src/main.c (parse_and_split_url): Fix stupid bug.

	* src/print.c: Include glib.h, gnome-defs.h, gnome-i18n.h

	* src/html-widget.h: 
	* src/print.h: Include gtkhtml-types.h instead of gtkhtml.h

2001-07-12  Richard Hult  <rhult@codefactory.se>

	* src/ui.c (html_on_url_cb): The app bar is not a GtkStatusBar
	but a GnomeAppbar.

2001-07-12  Johan Dahlin  <zilch.am@home.se>

	* src/ui.c, src/ui.h: Include main.h instead of main.h.

	* src/Makefile.am (devhelp_SOURCES): Added html-widget.[ch].

	* src/html-widget.c, src/html-widget.h: New files.

	* src/main.c, src/main.h: New files (renamed devhelp.[ch]).

	* src/ui.c (create_ui): A few more cleanups.

	* src/devhelp.c (corba_search_cb): 
	(main): Remove two type casts.

	* src/devhelp.h (DevhelpPriv struct): change GtkWidget to
	GtkNotebook.
	
	* src/Makefile.am (-DGNOMELOCALEDIR): Add this one too :)

2001-07-12  Richard Hult  <rhult@codefactory.se>

	* src/ui.c (menu_view_show_sidebar_activate_cb): Add the
	show/hide sidebar thing again.

2001-07-12  Johan Dahlin  <zilch.am@home.se>

	* src/devhelp.c, src/ui.c: Removed the d() macro.
	(main): Init gettext.

	* src/devhelp.h: Added d() macro.
	
	* src/Makefile.am (devhelp_SOURCES): Added ui.[ch]

	* src/ui.h: Added (just protdecl create_ui for now)

	* src/ui.c: Moved a lot of functions from devhelp.c *_cb &
	create_ui
	(bookmark_added_cb): Added two more g_return_if_fail checks.

	* src/devhelp.[ch]: renamed tree_goto to gtk_ctree_goto and
	changed so you send a GtkCTree instead of the whole priv struct,
	same with set_clist_contents -> gtk_clist_set_contents
	
	* src/devhelp.h: Added prototyp declaration for a few functions
	also used in ui.c, renamed fd in priv struct to function_database
	
	* src/devhelp.c (create_ui): moved glade_gnome_init here from
	main, so we don't have to include glade.h in devhelp.c
	
2001-07-12  Richard Hult  <rhult@codefactory.se>

	* src/devhelp.c (menu_view_show_sidebar_activate_cb): Reparenting
	action to hide/show the sidebar correctly.

2001-07-09  Richard Hult  <rhult@codefactory.se>

	* src/devhelp.c (menu_view_show_sidebar_activate_cb): Remove C++
	comments.
	(create_ui): Set zoom to medium as active.

2001-07-09  Johan Dahlin  <zilch.am@home.se>

	* src/help-browser.h: 
	* src/devhelp.h: 
	* src/devhelp.c: Header cleanup.
	
	* src/devhelp.c: Cleanup.

	* src/devhelp.h: Cleanup.	

2001-07-09  Mikael Hallendal  <micke@codefactory.se>

	* src/devhelp.c: defines for zooms

	* src/function-database.c 
	(function_database_freeze): added/impl.
	(function_database_thaw): added/impl.

	* src/bookshelf.[ch]: added

	* src/book.[ch]: added

2001-07-09  Johan Dahlin  <zilch.am@home.se>

	* ui/devhelp.png: Updated. Use gnome-help.png instead of
	galeon.png.

	* misc/html2xml.py: Added
	
	* misc/html2book2.py: Removed

	* misc/man2xml.py: Added

	* misc/Makefile: Removed

2001-07-09  Richard Hult <rhult@codefactory.se>

	* Imported into selma CVS.

2001-07-06  Johan Dahlin  <zilch.am@home.se>

	* devhelp.desktop.in: Added

	* src/devhelp.h: include config.h and removed VERSION from devhelp.h

